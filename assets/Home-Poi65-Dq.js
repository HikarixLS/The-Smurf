import{j as e}from"./index-BDTOxS1D.js";import{b as c,u as y}from"./vendor-DbVhFtnB.js";import{F as k,a as S,b as M,c as B,H as C}from"./Header-CcEJfMqN.js";import{F as I}from"./Footer-De9tRN7s.js";import{g as j}from"./MovieCard-CbBsXmNZ.js";import{M as f}from"./MovieRow-C-zdAan1.js";import{m as p}from"./movieService-BuZ_f8lD.js";import"./index-CO4GaNJo.js";import"./endpoints-CNvTD5q0.js";const T="_heroBanner_11mpi_1",w="_backdrop_11mpi_21",F="_backdropImage_11mpi_33",A="_gradientOverlay_11mpi_49",P="_content_11mpi_69",$="_info_11mpi_91",E="_title_11mpi_101",H="_originName_11mpi_121",R="_meta_11mpi_135",O="_rating_11mpi_151",L="_badge_11mpi_171",D="_categories_11mpi_189",U="_categoryTag_11mpi_203",z="_actions_11mpi_221",X="_playBtn_11mpi_231",q="_infoBtn_11mpi_273",G="_thumbnails_11mpi_319",J="_thumbnail_11mpi_319",K="_thumbnailActive_11mpi_379",Q="_navPrev_11mpi_395",V="_navNext_11mpi_397",W="_dots_11mpi_479",Y="_dot_11mpi_479",Z="_dotActive_11mpi_521",t={heroBanner:T,backdrop:w,backdropImage:F,gradientOverlay:A,content:P,info:$,title:E,originName:H,meta:R,rating:O,badge:L,categories:D,categoryTag:U,actions:z,playBtn:X,infoBtn:q,thumbnails:G,thumbnail:J,thumbnailActive:K,navPrev:Q,navNext:V,dots:W,dot:Y,dotActive:Z},ee=({movies:v=[]})=>{const[o,x]=c.useState(0),[d,u]=c.useState(!1),g=y(),n=v.slice(0,8),r=c.useCallback(s=>{d||(u(!0),x(s),setTimeout(()=>u(!1),600))},[d]),l=c.useCallback(()=>{r((o+1)%n.length)},[o,n.length,r]),h=c.useCallback(()=>{r((o-1+n.length)%n.length)},[o,n.length,r]);if(c.useEffect(()=>{if(n.length<=1)return;const s=setInterval(l,6e3);return()=>clearInterval(s)},[l,n.length]),n.length===0)return null;const a=n[o],m=j(a.poster_url||a.thumb_url),_=a.tmdb?.vote_average||0;return e.jsxs("section",{className:t.heroBanner,children:[e.jsxs("div",{className:t.backdrop,children:[e.jsx("img",{src:m,alt:a.name,className:t.backdropImage},o),e.jsx("div",{className:t.gradientOverlay})]}),e.jsxs("div",{className:t.content,children:[e.jsxs("div",{className:t.info,children:[e.jsx("h1",{className:t.title,children:a.name},`title-${o}`),a.origin_name&&e.jsx("p",{className:t.originName,children:a.origin_name}),e.jsxs("div",{className:t.meta,children:[_>0&&e.jsxs("span",{className:t.rating,children:["⭐ ",_.toFixed(1)]}),a.year&&e.jsx("span",{className:t.badge,children:a.year}),a.time&&e.jsx("span",{className:t.badge,children:a.time}),a.episode_current&&e.jsx("span",{className:t.badge,children:a.episode_current})]}),a.category&&a.category.length>0&&e.jsx("div",{className:t.categories,children:a.category.slice(0,3).map((s,i)=>e.jsx("span",{className:t.categoryTag,children:s.name},i))}),e.jsxs("div",{className:t.actions,children:[e.jsxs("button",{className:t.playBtn,onClick:()=>g(`/watch/${a.slug}`),children:[e.jsx(k,{})," Xem ngay"]}),e.jsxs("button",{className:t.infoBtn,onClick:()=>g(`/movie/${a.slug}`),children:[e.jsx(S,{})," Chi tiết"]})]})]}),e.jsx("div",{className:t.thumbnails,children:n.map((s,i)=>e.jsx("div",{className:`${t.thumbnail} ${i===o?t.thumbnailActive:""}`,onClick:()=>r(i),children:e.jsx("img",{src:j(s.thumb_url||s.poster_url),alt:s.name,loading:"lazy"})},s.slug||i))})]}),e.jsx("button",{className:t.navPrev,onClick:h,children:e.jsx(M,{})}),e.jsx("button",{className:t.navNext,onClick:l,children:e.jsx(B,{})}),e.jsx("div",{className:t.dots,children:n.map((s,i)=>e.jsx("button",{className:`${t.dot} ${i===o?t.dotActive:""}`,onClick:()=>r(i)},i))})]})},te="_home_1kud3_1",se="_sections_1kud3_6",N={home:te,sections:se},_e=()=>{const[v,o]=c.useState([]),[x,d]=c.useState([]),[u,g]=c.useState([]),[n,r]=c.useState([]),[l,h]=c.useState(!0);c.useEffect(()=>{a()},[]);const a=async()=>{h(!0);try{let m=!1;try{const i=await p.getHomeData();if(i?.data?.items){const b=i.data.items;o(b.slice(0,8)),d(b),m=!0}}catch{}const _=[p.getSeries(1,24),p.getSingleMovies(1,24)];m||_.push(p.getNewReleases(1,24));const s=await Promise.allSettled(_);if(s[0].status==="fulfilled"&&s[0].value?.data?.items&&g(s[0].value.data.items),s[1].status==="fulfilled"&&s[1].value?.data?.items&&r(s[1].value.data.items),!m&&s[2]?.status==="fulfilled"&&s[2].value?.data?.items){const i=s[2].value.data.items;o(i.slice(0,8)),d(i)}}catch(m){console.error("Error fetching home data:",m)}finally{h(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsxs("main",{className:N.home,children:[e.jsx(ee,{movies:v}),e.jsxs("div",{className:N.sections,children:[e.jsx(f,{title:"Phim Mới Cập Nhật",movies:x,loading:l,linkTo:"/browse"}),e.jsx(f,{title:"Phim Bộ Mới",movies:u,loading:l,linkTo:"/browse?type=series"}),e.jsx(f,{title:"Phim Lẻ Mới",movies:n,loading:l,linkTo:"/browse?type=single"})]})]}),e.jsx(I,{})]})};export{_e as default};
