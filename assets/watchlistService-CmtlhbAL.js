import{G as e,O as l,Q as i,D as h}from"./firebase-B8FQZRyY.js";import{d as s}from"./index-CKIGZ-Zr.js";const c="userWatchlists",u="userFavorites",$="userHistory",d=async(a,t)=>{if(!s||!a)return;const n=e(s,`${c}/${a}/${t.slug}`);await l(n,{slug:t.slug,name:t.name,origin_name:t.origin_name||"",thumb_url:t.thumb_url||t.poster_url||"",year:t.year||"",quality:t.quality||"",addedAt:Date.now()})},g=async(a,t)=>{!s||!a||await h(e(s,`${c}/${a}/${t}`))},_=async(a,t)=>!s||!a?!1:(await i(e(s,`${c}/${a}/${t}`))).exists(),p=async a=>{if(!s||!a)return[];const t=await i(e(s,`${c}/${a}`));if(!t.exists())return[];const n=[];return t.forEach(r=>n.push(r.val())),n.sort((r,o)=>o.addedAt-r.addedAt)},w=async(a,t)=>{if(!s||!a)return;const n=e(s,`${u}/${a}/${t.slug}`);await l(n,{slug:t.slug,name:t.name,origin_name:t.origin_name||"",thumb_url:t.thumb_url||t.poster_url||"",year:t.year||"",quality:t.quality||"",addedAt:Date.now()})},m=async(a,t)=>{!s||!a||await h(e(s,`${u}/${a}/${t}`))},A=async(a,t)=>!s||!a?!1:(await i(e(s,`${u}/${a}/${t}`))).exists(),F=async a=>{if(!s||!a)return[];const t=await i(e(s,`${u}/${a}`));if(!t.exists())return[];const n=[];return t.forEach(r=>n.push(r.val())),n.sort((r,o)=>o.addedAt-r.addedAt)},b=async(a,t)=>{if(!s||!a)return;const n=e(s,`${$}/${a}/${t.slug}`);await l(n,{slug:t.slug,name:t.name,origin_name:t.origin_name||"",thumb_url:t.thumb_url||t.poster_url||"",year:t.year||"",watchedAt:Date.now()})},R=async a=>{if(!s||!a)return[];const t=await i(e(s,`${$}/${a}`));if(!t.exists())return[];const n=[];return t.forEach(r=>n.push(r.val())),n.sort((r,o)=>o.watchedAt-r.watchedAt)};export{_ as a,w as b,g as c,d,b as e,p as f,F as g,R as h,A as i,m as r};
