import{j as e,L as T}from"./index-CgVwppYc.js";import{f as M,u as q,b as n}from"./vendor-DbVhFtnB.js";import{H as d,g as D,h as R,i as $,F as j,j as P,k as H,l as W}from"./Header-BXtNmw57.js";import{F as b}from"./Footer-Cmz1iNZx.js";import{M as E}from"./MovieRow-D9jeAXmo.js";import{m as N}from"./movieService-DXq-Rl6U.js";import{g as u,s as O}from"./MovieCard-hqABC4nK.js";import"./endpoints-DekhD34g.js";import"./index-CO4GaNJo.js";const K="_movieDetail_bhdh8_1",U="_errorPage_bhdh8_7",z="_homeBtn_bhdh8_22",Q="_hero_bhdh8_39",V="_heroImage_bhdh8_46",X="_heroOverlay_bhdh8_55",Y="_heroContent_bhdh8_64",J="_posterWrapper_bhdh8_76",Z="_poster_bhdh8_76",ee="_heroInfo_bhdh8_88",se="_title_bhdh8_93",ae="_originName_bhdh8_101",te="_metaRow_bhdh8_109",ie="_ratingBadge_bhdh8_117",ne="_metaBadge_bhdh8_130",ce="_qualityBadge_bhdh8_142",re="_langBadge_bhdh8_152",oe="_genres_bhdh8_163",le="_genreTag_bhdh8_170",de="_actions_bhdh8_187",he="_watchBtn_bhdh8_194",me="_actionBtn_bhdh8_215",_e="_active_bhdh8_239",ge="_tabSection_bhdh8_246",pe="_tabs_bhdh8_252",xe="_tab_bhdh8_246",ve="_tabActive_bhdh8_276",je="_tabContent_bhdh8_282",be="_overview_bhdh8_299",Ne="_description_bhdh8_305",ue="_detailGrid_bhdh8_312",Be="_detailItem_bhdh8_318",ye="_detailLabel_bhdh8_328",fe="_episodeGrid_bhdh8_341",we="_episodeBtn_bhdh8_347",Ce="_castGrid_bhdh8_369",Ie="_castItem_bhdh8_375",ke="_castAvatar_bhdh8_385",Se="_castName_bhdh8_399",Fe="_empty_bhdh8_404",s={movieDetail:K,errorPage:U,homeBtn:z,hero:Q,heroImage:V,heroOverlay:X,heroContent:Y,posterWrapper:J,poster:Z,heroInfo:ee,title:se,originName:ae,metaRow:te,ratingBadge:ie,metaBadge:ne,qualityBadge:ce,langBadge:re,genres:oe,genreTag:le,actions:de,watchBtn:he,actionBtn:me,active:_e,tabSection:ge,tabs:pe,tab:xe,tabActive:ve,tabContent:je,overview:be,description:Ne,detailGrid:ue,detailItem:Be,detailLabel:ye,episodeGrid:fe,episodeBtn:we,castGrid:Ce,castItem:Ie,castAvatar:ke,castName:Se,empty:Fe},Pe=()=>{const{slug:c}=M(),o=q(),[a,B]=n.useState(null),[y,h]=n.useState(!0),[m,l]=n.useState(null),[r,f]=n.useState("overview"),[_,w]=n.useState([]),[g,C]=n.useState(!1),[p,I]=n.useState(!1);n.useEffect(()=>{k()},[c]);const k=async()=>{h(!0),l(null);try{const t=await N.getMovieDetail(c);if(t?.data?.item){if(B(t.data.item),t.data.item.category?.length>0)try{const i=await N.getMoviesByCategory(t.data.item.category[0].slug,1);i?.data?.items&&w(i.data.items.filter(A=>A.slug!==c))}catch{}}else l("Không tìm thấy phim")}catch{l("Lỗi tải thông tin phim")}finally{h(!1)}},S=()=>o(`/watch/${c}`),F=()=>{navigator.share?navigator.share({title:a.name,url:window.location.href}):navigator.clipboard.writeText(window.location.href)};if(y)return e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(T,{})})]});if(m||!a)return e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsxs("div",{className:s.errorPage,children:[e.jsx("h1",{children:m||"Không tìm thấy phim"}),e.jsx("button",{className:s.homeBtn,onClick:()=>o("/"),children:"Về trang chủ"})]}),e.jsx(b,{})]});const L=u(a.poster_url||a.thumb_url),G=u(a.thumb_url||a.poster_url),x=a.tmdb?.vote_average||0,v=a.episodes?.[0]?.server_data||[];return e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsxs("main",{className:s.movieDetail,children:[e.jsxs("div",{className:s.hero,children:[e.jsx("img",{src:L,alt:"",className:s.heroImage}),e.jsx("div",{className:s.heroOverlay}),e.jsxs("div",{className:s.heroContent,children:[e.jsx("div",{className:s.posterWrapper,children:e.jsx("img",{src:G,alt:a.name,className:s.poster})}),e.jsxs("div",{className:s.heroInfo,children:[e.jsx("h1",{className:s.title,children:a.name}),a.origin_name&&e.jsx("p",{className:s.originName,children:a.origin_name}),e.jsxs("div",{className:s.metaRow,children:[x>0&&e.jsxs("span",{className:s.ratingBadge,children:[e.jsx(D,{})," ",x.toFixed(1)]}),a.year&&e.jsxs("span",{className:s.metaBadge,children:[e.jsx(R,{})," ",a.year]}),a.time&&e.jsxs("span",{className:s.metaBadge,children:[e.jsx($,{})," ",a.time]}),a.quality&&e.jsx("span",{className:s.qualityBadge,children:a.quality}),a.lang&&e.jsx("span",{className:s.langBadge,children:a.lang}),a.episode_current&&e.jsx("span",{className:s.metaBadge,children:a.episode_current})]}),a.category?.length>0&&e.jsx("div",{className:s.genres,children:a.category.map((t,i)=>e.jsx("span",{className:s.genreTag,children:t.name},i))}),e.jsxs("div",{className:s.actions,children:[e.jsxs("button",{className:s.watchBtn,onClick:S,children:[e.jsx(j,{})," Xem Ngay"]}),e.jsxs("button",{className:`${s.actionBtn} ${g?s.active:""}`,onClick:()=>C(!g),children:[e.jsx(P,{}),e.jsx("span",{children:"Yêu thích"})]}),e.jsxs("button",{className:`${s.actionBtn} ${p?s.active:""}`,onClick:()=>I(!p),children:[e.jsx(H,{}),e.jsx("span",{children:"Lưu lại"})]}),e.jsxs("button",{className:s.actionBtn,onClick:F,children:[e.jsx(W,{}),e.jsx("span",{children:"Chia sẻ"})]})]})]})]})]}),e.jsxs("div",{className:s.tabSection,children:[e.jsx("div",{className:s.tabs,children:["overview","episodes","cast","related"].map(t=>e.jsx("button",{className:`${s.tab} ${r===t?s.tabActive:""}`,onClick:()=>f(t),children:{overview:"Tổng quan",episodes:"Tập phim",cast:"Diễn viên",related:"Đề xuất"}[t]},t))}),e.jsxs("div",{className:s.tabContent,children:[r==="overview"&&e.jsxs("div",{className:s.overview,children:[e.jsx("h3",{children:"Nội dung"}),e.jsx("p",{className:s.description,children:a.content?O(a.content):"Đang cập nhật..."}),e.jsxs("div",{className:s.detailGrid,children:[a.country?.length>0&&e.jsxs("div",{className:s.detailItem,children:[e.jsx("span",{className:s.detailLabel,children:"Quốc gia"}),e.jsx("span",{children:a.country.map(t=>t.name).join(", ")})]}),a.director?.length>0&&e.jsxs("div",{className:s.detailItem,children:[e.jsx("span",{className:s.detailLabel,children:"Đạo diễn"}),e.jsx("span",{children:a.director.join(", ")})]}),a.status&&e.jsxs("div",{className:s.detailItem,children:[e.jsx("span",{className:s.detailLabel,children:"Trạng thái"}),e.jsx("span",{children:a.status==="completed"?"Hoàn thành":"Đang cập nhật"})]})]})]}),r==="episodes"&&e.jsx("div",{className:s.episodesList,children:v.length>0?e.jsx("div",{className:s.episodeGrid,children:v.map((t,i)=>e.jsxs("button",{className:s.episodeBtn,onClick:()=>o(`/watch/${c}`),children:[e.jsx(j,{size:14}),e.jsx("span",{children:t.name})]},i))}):e.jsx("p",{className:s.empty,children:"Chưa có tập phim"})}),r==="cast"&&e.jsx("div",{className:s.castList,children:a.actor?.length>0?e.jsx("div",{className:s.castGrid,children:a.actor.map((t,i)=>e.jsxs("div",{className:s.castItem,children:[e.jsx("div",{className:s.castAvatar,children:t.charAt(0)}),e.jsx("span",{className:s.castName,children:t})]},i))}):e.jsx("p",{className:s.empty,children:"Đang cập nhật..."})}),r==="related"&&e.jsx("div",{className:s.relatedSection,children:_.length>0?e.jsx(E,{title:"Phim tương tự",movies:_}):e.jsx("p",{className:s.empty,children:"Không có phim liên quan"})})]})]})]}),e.jsx(b,{})]})};export{Pe as default};
