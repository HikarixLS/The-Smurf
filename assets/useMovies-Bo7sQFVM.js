import{b as t}from"./vendor-DbVhFtnB.js";import{m as P}from"./movieService-Cf7HNypu.js";const H=(m=1,l={})=>{const[p,s]=t.useState([]),[u,g]=t.useState(!1),[v,r]=t.useState(null),[o,n]=t.useState(m),[f,c]=t.useState(!0),[M,d]=t.useState(1);t.useEffect(()=>{h()},[o,l]);const h=async()=>{g(!0),r(null);try{const e=await P.getMovies(o,l);if(e&&e.data){const i=e.data.items||[];s(o===1?i:S=>[...S,...i]);const a=e.data.params?.pagination;a?(d(a.totalPages||1),c(a.currentPage<a.totalPages)):c(i.length>0)}}catch(e){r(e.message||"Không thể tải danh sách phim"),console.error("Error fetching movies:",e)}finally{g(!1)}};return{movies:p,loading:u,error:v,hasMore:f,page:o,totalPages:M,loadMore:()=>{!u&&f&&n(e=>e+1)},refetch:()=>{n(1),s([]),h()},reset:()=>{s([]),n(1),c(!0),r(null)}}};export{H as u};
