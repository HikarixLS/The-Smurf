import{j as e}from"./index-CgVwppYc.js";import{b as o,u as j}from"./vendor-DbVhFtnB.js";import{F as N,a as y,b as S,c as M,H as B}from"./Header-BXtNmw57.js";import{F as C}from"./Footer-Cmz1iNZx.js";import{g as f}from"./MovieCard-hqABC4nK.js";import{M as x}from"./MovieRow-D9jeAXmo.js";import{m as b}from"./movieService-DXq-Rl6U.js";import"./index-CO4GaNJo.js";import"./endpoints-DekhD34g.js";const I="_heroBanner_1ka1a_1",T="_backdrop_1ka1a_21",w="_backdropImage_1ka1a_33",F="_gradientOverlay_1ka1a_49",A="_content_1ka1a_69",P="_info_1ka1a_91",$="_title_1ka1a_101",R="_originName_1ka1a_121",E="_meta_1ka1a_135",H="_rating_1ka1a_151",O="_badge_1ka1a_171",L="_categories_1ka1a_189",U="_categoryTag_1ka1a_203",z="_actions_1ka1a_221",D="_playBtn_1ka1a_231",X="_infoBtn_1ka1a_273",q="_thumbnails_1ka1a_319",G="_thumbnail_1ka1a_319",J="_thumbnailActive_1ka1a_379",K="_navPrev_1ka1a_395",Q="_navNext_1ka1a_397",V="_dots_1ka1a_469",W="_dot_1ka1a_469",Y="_dotActive_1ka1a_511",a={heroBanner:I,backdrop:T,backdropImage:w,gradientOverlay:F,content:A,info:P,title:$,originName:R,meta:E,rating:H,badge:O,categories:L,categoryTag:U,actions:z,playBtn:D,infoBtn:X,thumbnails:q,thumbnail:G,thumbnailActive:J,navPrev:K,navNext:Q,dots:V,dot:W,dotActive:Y},Z=({movies:v=[]})=>{const[c,k]=o.useState(0),[_,g]=o.useState(!1),u=j(),n=v.slice(0,8),r=o.useCallback(t=>{_||(g(!0),k(t),setTimeout(()=>g(!1),600))},[_]),l=o.useCallback(()=>{r((c+1)%n.length)},[c,n.length,r]),h=o.useCallback(()=>{r((c-1+n.length)%n.length)},[c,n.length,r]);if(o.useEffect(()=>{if(n.length<=1)return;const t=setInterval(l,6e3);return()=>clearInterval(t)},[l,n.length]),n.length===0)return null;const s=n[c],m=f(s.poster_url||s.thumb_url),d=s.tmdb?.vote_average||0;return e.jsxs("section",{className:a.heroBanner,children:[e.jsxs("div",{className:a.backdrop,children:[e.jsx("img",{src:m,alt:s.name,className:a.backdropImage},c),e.jsx("div",{className:a.gradientOverlay})]}),e.jsxs("div",{className:a.content,children:[e.jsxs("div",{className:a.info,children:[e.jsx("h1",{className:a.title,children:s.name},`title-${c}`),s.origin_name&&e.jsx("p",{className:a.originName,children:s.origin_name}),e.jsxs("div",{className:a.meta,children:[d>0&&e.jsxs("span",{className:a.rating,children:["⭐ ",d.toFixed(1)]}),s.year&&e.jsx("span",{className:a.badge,children:s.year}),s.time&&e.jsx("span",{className:a.badge,children:s.time}),s.episode_current&&e.jsx("span",{className:a.badge,children:s.episode_current})]}),s.category&&s.category.length>0&&e.jsx("div",{className:a.categories,children:s.category.slice(0,3).map((t,i)=>e.jsx("span",{className:a.categoryTag,children:t.name},i))}),e.jsxs("div",{className:a.actions,children:[e.jsxs("button",{className:a.playBtn,onClick:()=>u(`/watch/${s.slug}`),children:[e.jsx(N,{})," Xem ngay"]}),e.jsxs("button",{className:a.infoBtn,onClick:()=>u(`/movie/${s.slug}`),children:[e.jsx(y,{})," Chi tiết"]})]})]}),e.jsx("div",{className:a.thumbnails,children:n.map((t,i)=>e.jsx("div",{className:`${a.thumbnail} ${i===c?a.thumbnailActive:""}`,onClick:()=>r(i),children:e.jsx("img",{src:f(t.thumb_url||t.poster_url),alt:t.name,loading:"lazy"})},t.slug||i))})]}),e.jsx("button",{className:a.navPrev,onClick:h,children:e.jsx(S,{})}),e.jsx("button",{className:a.navNext,onClick:l,children:e.jsx(M,{})}),e.jsx("div",{className:a.dots,children:n.map((t,i)=>e.jsx("button",{className:`${a.dot} ${i===c?a.dotActive:""}`,onClick:()=>r(i)},i))})]})},ee="_home_1kud3_1",ae="_sections_1kud3_6",p={home:ee,sections:ae},de=()=>{const[v,c]=o.useState([]),[k,_]=o.useState([]),[g,u]=o.useState([]),[n,r]=o.useState([]),[l,h]=o.useState(!0);o.useEffect(()=>{s()},[]);const s=async()=>{h(!0);try{const[m,d,t]=await Promise.allSettled([b.getNewReleases(1,24),b.getSeries(1,24),b.getSingleMovies(1,24)]);if(m.status==="fulfilled"&&m.value?.data?.items){const i=m.value.data.items;c(i.slice(0,8)),_(i)}d.status==="fulfilled"&&d.value?.data?.items&&u(d.value.data.items),t.status==="fulfilled"&&t.value?.data?.items&&r(t.value.data.items)}catch(m){console.error("Error fetching home data:",m)}finally{h(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsxs("main",{className:p.home,children:[e.jsx(Z,{movies:v}),e.jsxs("div",{className:p.sections,children:[e.jsx(x,{title:"Phim Mới Cập Nhật",movies:k,loading:l,linkTo:"/browse"}),e.jsx(x,{title:"Phim Bộ Mới",movies:g,loading:l,linkTo:"/browse?type=series"}),e.jsx(x,{title:"Phim Lẻ Mới",movies:n,loading:l,linkTo:"/browse?type=single"})]})]}),e.jsx(C,{})]})};export{de as default};
