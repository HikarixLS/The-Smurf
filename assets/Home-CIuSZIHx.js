import{j as e}from"./index-Dww8Xo-m.js";import{b as o,u as N}from"./vendor-DbVhFtnB.js";import{F as y,a as k,b as S,c as M,H as B}from"./Header-CKznWeIE.js";import{F as C}from"./Footer-BtG0UkGS.js";import{g as f}from"./MovieCard-ChKncVvd.js";import{M as x}from"./MovieRow-C-ZcNX_h.js";import{m as b}from"./movieService-DyBGQg6k.js";import"./index-CO4GaNJo.js";import"./endpoints-fMD0dIgT.js";const I="_heroBanner_11mpi_1",T="_backdrop_11mpi_21",w="_backdropImage_11mpi_33",F="_gradientOverlay_11mpi_49",A="_content_11mpi_69",P="_info_11mpi_91",$="_title_11mpi_101",R="_originName_11mpi_121",E="_meta_11mpi_135",H="_rating_11mpi_151",O="_badge_11mpi_171",L="_categories_11mpi_189",U="_categoryTag_11mpi_203",z="_actions_11mpi_221",D="_playBtn_11mpi_231",X="_infoBtn_11mpi_273",q="_thumbnails_11mpi_319",G="_thumbnail_11mpi_319",J="_thumbnailActive_11mpi_379",K="_navPrev_11mpi_395",Q="_navNext_11mpi_397",V="_dots_11mpi_479",W="_dot_11mpi_479",Y="_dotActive_11mpi_521",s={heroBanner:I,backdrop:T,backdropImage:w,gradientOverlay:F,content:A,info:P,title:$,originName:R,meta:E,rating:H,badge:O,categories:L,categoryTag:U,actions:z,playBtn:D,infoBtn:X,thumbnails:q,thumbnail:G,thumbnailActive:J,navPrev:K,navNext:Q,dots:V,dot:W,dotActive:Y},Z=({movies:p=[]})=>{const[c,v]=o.useState(0),[_,g]=o.useState(!1),u=N(),i=p.slice(0,8),r=o.useCallback(a=>{_||(g(!0),v(a),setTimeout(()=>g(!1),600))},[_]),l=o.useCallback(()=>{r((c+1)%i.length)},[c,i.length,r]),h=o.useCallback(()=>{r((c-1+i.length)%i.length)},[c,i.length,r]);if(o.useEffect(()=>{if(i.length<=1)return;const a=setInterval(l,6e3);return()=>clearInterval(a)},[l,i.length]),i.length===0)return null;const t=i[c],m=f(t.poster_url||t.thumb_url),d=t.tmdb?.vote_average||0;return e.jsxs("section",{className:s.heroBanner,children:[e.jsxs("div",{className:s.backdrop,children:[e.jsx("img",{src:m,alt:t.name,className:s.backdropImage},c),e.jsx("div",{className:s.gradientOverlay})]}),e.jsxs("div",{className:s.content,children:[e.jsxs("div",{className:s.info,children:[e.jsx("h1",{className:s.title,children:t.name},`title-${c}`),t.origin_name&&e.jsx("p",{className:s.originName,children:t.origin_name}),e.jsxs("div",{className:s.meta,children:[d>0&&e.jsxs("span",{className:s.rating,children:["⭐ ",d.toFixed(1)]}),t.year&&e.jsx("span",{className:s.badge,children:t.year}),t.time&&e.jsx("span",{className:s.badge,children:t.time}),t.episode_current&&e.jsx("span",{className:s.badge,children:t.episode_current})]}),t.category&&t.category.length>0&&e.jsx("div",{className:s.categories,children:t.category.slice(0,3).map((a,n)=>e.jsx("span",{className:s.categoryTag,children:a.name},n))}),e.jsxs("div",{className:s.actions,children:[e.jsxs("button",{className:s.playBtn,onClick:()=>u(`/watch/${t.slug}`),children:[e.jsx(y,{})," Xem ngay"]}),e.jsxs("button",{className:s.infoBtn,onClick:()=>u(`/movie/${t.slug}`),children:[e.jsx(k,{})," Chi tiết"]})]})]}),e.jsx("div",{className:s.thumbnails,children:i.map((a,n)=>e.jsx("div",{className:`${s.thumbnail} ${n===c?s.thumbnailActive:""}`,onClick:()=>r(n),children:e.jsx("img",{src:f(a.thumb_url||a.poster_url),alt:a.name,loading:"lazy"})},a.slug||n))})]}),e.jsx("button",{className:s.navPrev,onClick:h,children:e.jsx(S,{})}),e.jsx("button",{className:s.navNext,onClick:l,children:e.jsx(M,{})}),e.jsx("div",{className:s.dots,children:i.map((a,n)=>e.jsx("button",{className:`${s.dot} ${n===c?s.dotActive:""}`,onClick:()=>r(n)},n))})]})},ee="_home_1kud3_1",se="_sections_1kud3_6",j={home:ee,sections:se},de=()=>{const[p,c]=o.useState([]),[v,_]=o.useState([]),[g,u]=o.useState([]),[i,r]=o.useState([]),[l,h]=o.useState(!0);o.useEffect(()=>{t()},[]);const t=async()=>{h(!0);try{const[m,d,a]=await Promise.allSettled([b.getNewReleases(1,24),b.getSeries(1,24),b.getSingleMovies(1,24)]);if(m.status==="fulfilled"&&m.value?.data?.items){const n=m.value.data.items;c(n.slice(0,8)),_(n)}d.status==="fulfilled"&&d.value?.data?.items&&u(d.value.data.items),a.status==="fulfilled"&&a.value?.data?.items&&r(a.value.data.items)}catch(m){console.error("Error fetching home data:",m)}finally{h(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsxs("main",{className:j.home,children:[e.jsx(Z,{movies:p}),e.jsxs("div",{className:j.sections,children:[e.jsx(x,{title:"Phim Mới Cập Nhật",movies:v,loading:l,linkTo:"/browse"}),e.jsx(x,{title:"Phim Bộ Mới",movies:g,loading:l,linkTo:"/browse?type=series"}),e.jsx(x,{title:"Phim Lẻ Mới",movies:i,loading:l,linkTo:"/browse?type=single"})]})]}),e.jsx(C,{})]})};export{de as default};
