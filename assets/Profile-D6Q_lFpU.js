import{j as s,u as N}from"./index-CKIGZ-Zr.js";import{e as y,b as g}from"./vendor-DTekaQTv.js";import{n as I,o as C,l as T,L,M as S}from"./index-CWt2mSl_.js";import{H as P}from"./Header-CVFfGWSw.js";import{F,g as H}from"./helpers-BCy9yaU_.js";import{P as l}from"./index-BDRdhlOT.js";import{g as k,f as O,h as B}from"./watchlistService-CmtlhbAL.js";import"./firebase-B8FQZRyY.js";const Y="_glassCard_1npeo_1",w="_clickable_1npeo_53",G="_light_1npeo_67",U="_heavy_1npeo_73",E="_noPadding_1npeo_79",R="_fullHeight_1npeo_83",m={glassCard:Y,clickable:w,light:G,heavy:U,noPadding:E,fullHeight:R},o=({children:t,className:_="",intensity:h="medium",onClick:n=null,noPadding:d=!1,fullHeight:c=!1,...u})=>{const r=[m.glassCard,m[h],n&&m.clickable,d&&m.noPadding,c&&m.fullHeight,_].filter(Boolean).join(" ");return s.jsx("div",{className:r,onClick:n,...u,children:t})};o.propTypes={children:l.node.isRequired,className:l.string,intensity:l.oneOf(["light","medium","heavy"]),onClick:l.func,noPadding:l.bool,fullHeight:l.bool};const V="_profile_8ag8b_1",W="_title_8ag8b_6",z="_grid_8ag8b_16",M="_userCard_8ag8b_23",$="_avatar_8ag8b_28",q="_name_8ag8b_40",A="_email_8ag8b_46",K="_avatarImg_8ag8b_56",D="_signOutBtn_8ag8b_63",J="_statsGrid_8ag8b_86",Q="_statCard_8ag8b_92",X="_statIcon_8ag8b_97",Z="_statValue_8ag8b_103",ss="_statLabel_8ag8b_109",es="_section_8ag8b_114",as="_sectionTitle_8ag8b_118",ts="_emptyState_8ag8b_124",is="_movieList_8ag8b_130",ns="_movieItem_8ag8b_136",ls="_movieThumb_8ag8b_153",os="_movieItemInfo_8ag8b_161",cs="_movieItemTitle_8ag8b_168",rs="_movieItemYear_8ag8b_177",e={profile:V,title:W,grid:z,userCard:M,avatar:$,name:q,email:A,avatarImg:K,signOutBtn:D,statsGrid:J,statCard:Q,statIcon:X,statValue:Z,statLabel:ss,section:es,sectionTitle:as,emptyState:ts,movieList:is,movieItem:ns,movieThumb:ls,movieItemInfo:os,movieItemTitle:cs,movieItemYear:rs},xs=()=>{const{user:t,signOut:_}=N(),h=y(),[n,d]=g.useState([]),[c,u]=g.useState([]),[r,x]=g.useState([]);g.useEffect(()=>{if(!t)return;(async()=>{const[a,p,f]=await Promise.all([k(t.uid),O(t.uid),B(t.uid)]);d(a),u(p),x(f)})()},[t]);const b=async()=>{try{await _(),h("/login")}catch(i){console.error("Sign out error:",i)}},j=[{icon:s.jsx(I,{}),label:"Y√™u th√≠ch",value:n.length.toString()},{icon:s.jsx(C,{}),label:"Watchlist",value:c.length.toString()},{icon:s.jsx(T,{}),label:"ƒê√£ xem",value:r.length.toString()}],v=i=>i.length?s.jsx("div",{className:e.movieList,children:i.map(a=>s.jsxs("div",{className:e.movieItem,onClick:()=>h(`/movie/${a.slug}`),children:[s.jsx("img",{src:H(a.thumb_url),alt:a.origin_name||a.name,className:e.movieThumb,onError:p=>{p.target.style.display="none"}}),s.jsxs("div",{className:e.movieItemInfo,children:[s.jsx("span",{className:e.movieItemTitle,children:a.origin_name||a.name}),a.year&&s.jsx("span",{className:e.movieItemYear,children:a.year})]})]},a.slug))}):null;return s.jsxs(s.Fragment,{children:[s.jsx(P,{}),s.jsx("main",{className:e.profile,children:s.jsxs("div",{className:"container",children:[s.jsx("h1",{className:e.title,children:"Profile"}),s.jsxs("div",{className:e.grid,children:[s.jsxs(o,{className:e.userCard,children:[s.jsx("div",{className:e.avatar,children:t?.photoURL?s.jsx("img",{src:t.photoURL,alt:t.displayName,className:e.avatarImg,referrerPolicy:"no-referrer"}):s.jsx(L,{size:64})}),s.jsx("h2",{className:e.name,children:t?.displayName||"User"}),s.jsx("p",{className:e.email,children:t?.email||""}),s.jsxs("button",{className:e.signOutBtn,onClick:b,children:[s.jsx(S,{size:16})," ƒêƒÉng xu·∫•t"]})]}),s.jsx("div",{className:e.statsGrid,children:j.map((i,a)=>s.jsxs(o,{className:e.statCard,children:[s.jsx("div",{className:e.statIcon,children:i.icon}),s.jsx("div",{className:e.statValue,children:i.value}),s.jsx("div",{className:e.statLabel,children:i.label})]},a))})]}),s.jsxs(o,{className:e.section,children:[s.jsx("h2",{className:e.sectionTitle,children:"‚ù§Ô∏è Y√™u th√≠ch"}),n.length>0?v(n):s.jsx("p",{className:e.emptyState,children:"Ch∆∞a c√≥ phim y√™u th√≠ch. Nh·∫•n ‚ù§Ô∏è tr√™n trang chi ti·∫øt phim!"})]}),s.jsxs(o,{className:e.section,children:[s.jsx("h2",{className:e.sectionTitle,children:"üîñ Watchlist"}),c.length>0?v(c):s.jsx("p",{className:e.emptyState,children:"Ch∆∞a c√≥ phim trong watchlist. Nh·∫•n üîñ tr√™n trang chi ti·∫øt phim!"})]}),s.jsxs(o,{className:e.section,children:[s.jsx("h2",{className:e.sectionTitle,children:"üïê L·ªãch s·ª≠ xem"}),r.length>0?v(r):s.jsx("p",{className:e.emptyState,children:"Ch∆∞a xem phim n√†o. Kh√°m ph√° ngay!"})]})]})}),s.jsx(F,{})]})};export{xs as default};
