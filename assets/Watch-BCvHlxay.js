import{j as e,L as u}from"./index-GLHNB5J5.js";import{f as j,u as x,b as o}from"./vendor-DbVhFtnB.js";import{f}from"./index-CxPFECyC.js";import{B as m}from"./endpoints-CNeRMtgQ.js";import{m as g}from"./movieService-CwKhEWLR.js";const N="_watch_oys4v_1",w="_container_oys4v_7",S="_playerWrapper_oys4v_13",k="_player_oys4v_13",B="_info_oys4v_32",C="_title_oys4v_42",E="_meta_oys4v_49",V="_episodeSelector_oys4v_57",b="_sectionTitle_oys4v_61",T="_episodes_oys4v_68",W="_episodeBtn_oys4v_74",L="_active_oys4v_90",M="_actions_oys4v_95",$="_noVideo_oys4v_101",s={watch:N,container:w,playerWrapper:S,player:k,info:B,title:C,meta:E,episodeSelector:V,sectionTitle:b,episodes:T,episodeBtn:W,active:L,actions:M,noVideo:$},A=()=>{const{slug:n}=j(),l=x(),[t,h]=o.useState(null),[_,d]=o.useState(!0),[p,v]=o.useState(0);o.useEffect(()=>{y()},[n]);const y=async()=>{d(!0);try{const a=await g.getMovieDetail(n);a&&a.data&&a.data.item&&h(a.data.item)}catch(a){console.error("Error fetching movie:",a)}finally{d(!1)}};if(_)return e.jsx("div",{className:s.watch,children:e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(u,{})})});if(!t)return e.jsx("div",{className:s.watch,children:e.jsxs("div",{className:s.container,children:[e.jsx("h1",{style:{color:"white"},children:"Không tìm thấy phim"}),e.jsx(m,{onClick:()=>l("/"),children:"Về trang chủ"})]})});const c=t.episodes&&t.episodes.length>0?t.episodes[0].server_data||[]:[],i=c[p];return e.jsx("div",{className:s.watch,children:e.jsxs("div",{className:s.container,children:[e.jsx("div",{className:s.actions,children:e.jsx(m,{onClick:()=>l(`/movie/${n}`),icon:e.jsx(f,{}),variant:"secondary",children:"Quay lại"})}),e.jsx("div",{className:s.playerWrapper,children:i&&i.link_embed?e.jsx("iframe",{src:i.link_embed,className:s.player,allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"}):i&&i.link_m3u8?e.jsx("video",{src:i.link_m3u8,className:s.player,controls:!0,autoPlay:!0}):e.jsx("div",{className:s.noVideo,children:"Không có nguồn phim khả dụng"})}),e.jsxs("div",{className:s.info,children:[e.jsx("h1",{className:s.title,children:t.name}),e.jsxs("div",{className:s.meta,children:[e.jsx("span",{children:t.year}),e.jsx("span",{children:t.quality}),e.jsx("span",{children:t.lang}),i&&e.jsxs("span",{children:["Tập ",i.name]})]}),c.length>1&&e.jsxs("div",{className:s.episodeSelector,children:[e.jsx("h2",{className:s.sectionTitle,children:"Chọn tập"}),e.jsx("div",{className:s.episodes,children:c.map((a,r)=>e.jsx("button",{className:`${s.episodeBtn} ${r===p?s.active:""}`,onClick:()=>v(r),children:a.name},r))})]})]})]})})};export{A as default};
